<div dir="rtl" align="right">

### **نسخه انگلیسی ◀️ [English version](README.fa.md)**

<br>

# اپلیکیشن مدیریت تسک

یک **اپلیکیشن مدیریت تسک با ویژگی‌های پیشرفته** الهام گرفته از **Microsoft To Do**.
ساخته شده با **Next.js 15 (App Router)** و **Supabase**، این اپ از همکاری در زمان واقعی، سازماندهی تسک‌ها و حفظ تغییرات در حالت آفلاین پشتیبانی می‌کند.

<br>

## 📷 پیش‌نمایش

_(یک گیف یا تصویر از UI اپلیکیشن در اینجا قرار دهید)_

<br>

## 🚀 ویژگی‌ها

- **لیست‌های سفارشی و پیش‌فرض**: کاربران می‌توانند لیست‌ها ایجاد کنند و تسک‌های خود را سازماندهی کنند. یک لیست ویژه به نام "My Day" برای نمایش تسک‌های روز جاری وجود دارد.
- **همگام‌سازی تسک‌ها در زمان واقعی**: لیست‌های به اشتراک‌گذاری شده به‌طور لحظه‌ای با استفاده از **Supabase Realtime & RLS** همگام‌سازی می‌شوند.
- **دعوت به لیست و کنترل دسترسی**:

  - لیست‌ها را از طریق لینک دعوت با دیگران به اشتراک بگذارید.
  - کاربران را از لیست‌های به اشتراک‌گذاشته شده حذف کنید.
  - اشتراک‌گذاری لیست‌ها را برای کاربران غیرفعال کنید: این کار دسترسی به لیست را محدود کرده و فقط به صاحب لیست اجازه می‌دهد که آن را مشاهده و ویرایش کند.
  - لینک‌های دعوت را غیرفعال کنید: این عمل از اضافه شدن کاربران جدید از طریق لینک دعوت جلوگیری می‌کند.

- **مدیریت تسک‌ها**:

  - تسک‌ها را ستاره‌دار کنید، بعنوان تکمیل‌شده علامت‌گذاری کنید و آن‌ها را دسته‌بندی کنید.
  - یادداشت‌ها و زیرتسک‌ به تسک‌ها اضافه کنید.
  - یادآوری‌ها، تاریخ‌های سررسید و تکرار دوره ای سررسید تنظیم کنید.

- **آلارم یادآوری تسک**: یک آلارم پاپ‌آپ هنگامی که زمان یادآوری یک تسک فرا می‌رسد، نمایش داده می‌شود و اطمینان می‌دهد که کاربران بلافاصله در زمان مقرر از آن مطلع می‌شوند.

- **پشتیبانی آفلاین و مکانیزم تغییرات**:
  - اگر ارتباط قطع شود، تغییرات در **Session Storage** ذخیره شده و وقتی ارتباط دوباره برقرار شد، همگام‌سازی می‌شوند.
  - اطمینان از ثبات داده‌ها حتی در زمان قطع اتصال شبکه.
- **بهینه‌سازی‌های سمت کلاینت**:

  - از **Zustand برای استیت منیجمنت** استفاده شده که در **Session Storage** ذخیره می‌شود تا عملکرد بهبود یابد.
  - از درخواست‌های اضافی به دیتابیس جلوگیری می‌شود و فقط تغییرات مربوطه همگام‌سازی می‌شوند.

- **جمع‌آوری خطاها و رفع مشکلات در نسخه‌های آینده**: تمام خطاهای سمت کلاینت جمع‌آوری شده و به دیتابیس ارسال می‌شود تا در نسخه‌های آینده برطرف شوند.

- **حفاظت از مسیرها**: با استفاده از middleware و Clerk، فقط کاربران احراز هویت‌شده می‌توانند به صفحات حساس دسترسی داشته باشند.
- **جستجو در تسک‌ها**: امکان جستجو بین تسک‌های کاربران و تسک‌های به اشتراک‌گذاشته‌شده وجود دارد که مدیریت تسک‌ها را در تمام لیست‌ها آسان می‌کند.

- **طراحی موبایل‌فرست و کاملاً واکنش‌گرا**:

  - UI به‌طور دقیق طراحی شده با جزئیات پیکسل‌به‌پیکسل.
  - از **Framer Motion** برای انیمیشن‌های نرم و ترنزیشن ها استفاده شده که تجربه کاربری جذاب‌تری ایجاد می‌کند.
  - **سیستم رنگی سفارشی**: یک طرح رنگی جداگانه برای هر بخش از لیست‌ها که هویت بصری خاصی را برای هر بخش به وجود می‌آورد.
  - **اسپینر لودینگ تم‌دار**: یک اسپینر لودینگ که با تم کلی هماهنگ است و اطمینان می‌دهد که تمام اجزا احساس یکپارچگی دارند.
  - **تصاویر سفارشی**: برای طراحی صفحات کلیدی مانند ورود، دعوت به پیوستن و "My Day" استفاده شده تا عناصر بصری جذابی به UI اضافه کند.

<br>

## 🛠️ تکنولوژی‌ها

| تکنولوژی                    | هدف                                          |
| --------------------------- | -------------------------------------------- |
| **Next.js 15 (App Router)** | فریم‌ورک اصلی                                |
| **Supabase**                | دیتابیس، همگام‌سازی در زمان واقعی (RLS, RPC) |
| **Clerk**                   | احراز هویت و مدیریت کاربران                  |
| **Server Actions**          | تعاملات امن با دیتابیس                       |
| **Zustand**                 | استیت منیجمنت (ذخیره شده در Session Storage) |
| **Tailwind CSS**            | استایل‌دهی                                   |
| **Framer Motion**           | انیمیشن‌های نرم برای انتقال‌ها و مودال‌ها    |

<br>

## 🏆 چالش‌های فنی و راه‌حل‌ها

### **1️⃣ مسائل همگام‌سازی در ریل تایم**

- **چالش**: همگام‌سازی تسک‌ها به‌طور **یکپارچه** بین کاربران مختلف
- **راه‌حل**: از **Supabase Realtime + RPC functions** استفاده شد تا اطمینان حاصل شود که کاربران همیشه آخرین داده‌ها را دریافت می‌کنند. اگر listener در زمان واقعی با مشکل مواجه شود، یک **RPC function هنگام بارگذاری مجدد** اجرا می‌شود تا آخرین استیت را بازیابی کند.

### **2️⃣ امنیت و احراز هویت (RLS & RPC)**

- **چالش**: جلوگیری از تغییرات غیرمجاز.
- **راه‌حل**: از **Row Level Security (RLS) & RPC functions** استفاده شد تا بررسی‌های دقیق احراز هویت و مجوز به‌طور مستقیم در سطح دیتابیس انجام شوند.

### **3️⃣ مدیریت حالت آفلاین و مکانیزم تغییرات**

- **چالش**: اطمینان از این که تسک‌ها هنگام آفلاین بودن کاربران **از دست نروند**.
- **راه‌حل**: یک **مکانیزم تغییرات** پیاده‌سازی شد که به‌طور موقت به‌روزرسانی‌ها را در **Session Storage** ذخیره می‌کند و آن‌ها را هنگام برقراری مجدد اتصال همگام‌سازی می‌کند.

  - تمام تغییرات بهینه شده تا تعداد نوشتن‌ها در دیتابیس کاهش یابد و عملیات غیرضروری انجام نشود.
  - به‌روزرسانی‌های متعدد برای یک تسک در یک درخواست بهینه‌شده ترکیب می‌شوند.

### **4️⃣ سیستم تکرار تسک‌ها و یادآوری‌ها**

- **چالش**: مدیریت **تاریخ‌های سررسید، قوانین تکرار و یادآوری‌ها** به‌طور یکپارچه.
- **راه‌حل**: یک **منطق تکرار سفارشی** ساخته شد و یک سیستم یادآوری پیاده‌سازی شد که یادآوری‌ها را از طریق **پاپ‌آپ مودال** نشان می‌دهد.

<br>

## 🎯 تصمیمات کلیدی معماری

- **Next.js**: این فریم‌ورک برای ادغام بدون مشکل فرانت‌اند و بک‌اند انتخاب شد. با استفاده از **(SSR)** و **Server Actions**، ارتباطات کلاینت-دیتابیس به‌طور کارآمد و امن انجام می‌شود، که معماری ساده و توسعه سریع برای اپلیکیشن‌های زمان واقعی و با ویژگی‌های زیاد را فراهم می‌کند.

- **Server Actions**: Server Actions به‌عنوان یک واسطه عمل می‌کند و ارتباطات کلاینت-دیتابیس را به‌صورت امن مدیریت می‌کند و از اتصال مستقیم کلاینت به دیتابیس جلوگیری می‌کند.

  - امنیت بیشتر
  - کنترل بر جریان داده‌ها

- **امنیت، احراز هویت و مجوز**:

  - بدون اتصال مستقیم کلاینت به دیتابیس: تمام تعاملات از طریق Server Actions انجام می‌شود تا امنیت و قابلیت اطمینان بهبود یابد.

  - احراز هویت و مجوز: در سطح دیتابیس با استفاده از RLS و RPC functions مدیریت می‌شود تا فقط کاربران مجاز به داده‌های حساس دسترسی داشته باشند.

- **RPC Functions برای بروزرسانی‌های بحرانی**: اطمینان از **عملیات اتمی دیتابیس**، جلوگیری از استیت‌های نامتعارف و اطمینان از به‌روزرسانی‌های معتبر داده‌ها در سرتاسر اپلیکیشن.

- **Zustand برای استیت منیجمنت**: استیت در **Session Storage** ذخیره می‌شود تا با حفظ استیت، عملکرد بهبود یابد و از رندرهای غیرضروری جلوگیری شود.

<br>

## 📌 درس‌های آموخته‌شده

این پروژه به من کمک کرد تا مهارت‌های خود را در موارد زیر تقویت کنم:

- **Advanced Next.js & Server Actions**
- **Database security (RLS, RPC, Supabase Functions)**
- **Optimizing state management (Zustand + Session Storage)**
- **Building resilient real-time systems**
- **Handling offline sync & managing conflicts**

<br>

<br>

# شما می‌توانید از اپ به دو روش استفاده کنید

### 🅰️ استفاده از نسخه آنلاین (Vercel)

از طریق لینک زیر وارد شوید
<br>
[Microsoft Todo](https://ms-todo100.vercel.app)

### ⚠️ نکته

- **ورود با گوگل در Clerk به دلیل تحریم‌ها نیاز به VPN یا تحریم شکن خوب دارد.**
- اگر موفق به لاگین نشدید، می‌توانید از اکانت تست زیر استفاده کنید (فقط برای تست):

<div dir="ltr" align="left">

```
Username:  test1
Password:  11223344.Rr
```

</div>

---

### 🅱️ اجرا به صورت لوکال:

<div dir="ltr" align="left">

1️⃣ Clone the repository from GitHub

```bash
git clone https://github.com/Mobin-Vr/To-Do.git
```

2️⃣ Run the development server

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

3️⃣ Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

</div>
